(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13553db5"],{"159b":function(t,e,s){var a=s("da84"),i=s("fdbc"),n=s("17c2"),r=s("9112");for(var c in i){var o=a[c],l=o&&o.prototype;if(l&&l.forEach!==n)try{r(l,"forEach",n)}catch(u){l.forEach=n}}},"17c2":function(t,e,s){"use strict";var a=s("b727").forEach,i=s("b301");t.exports=i("forEach")?function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach},3492:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"seatsSelect"},[s("van-nav-bar",{attrs:{title:"电影汇","left-arrow":""},on:{"click-left":t.back}}),s("div",{staticClass:"content"},[s("div",{staticClass:"msg"},[s("p",{staticClass:"name"},[t._v(t._s(t.movieDetailDatas.title))]),s("p",{staticClass:"address",on:{click:function(e){return t.getLocation(t.address)}}},[s("i",{staticClass:"icon"}),s("span",[t._v(t._s(t.address))])])]),s("div",{staticClass:"seats-about"},[s("p",{staticClass:"screen"},[t._v(t._s(t.room)+"厅银幕")]),s("p",{staticClass:"subtitle"},[t._v("银幕中央")]),s("div",{staticClass:"seats"},t._l(t.seats,(function(e,a){return s("div",{key:a,staticClass:"line"},t._l(e,(function(e,i){return s("span",{key:i,class:["auto-img",0==e?"selling":1==e?"sold":"selected"],on:{click:function(s){return t.select({line:a,num:i,type:e})}}})})),0)})),0),t._m(0)]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.seatSelected.length,expression:"seatSelected.length"}],staticClass:"select"},[s("span",{staticClass:"info"},[t._v("已选座位：")]),s("div",{staticClass:"selected"},t._l(t.seatSelected,(function(e,a){return s("span",{key:a,staticClass:"num"},[t._v(t._s(e[0]+1)+"排"+t._s(e[1]+1)+"号位")])})),0)]),s("van-submit-bar",{attrs:{loading:t.loading,"text-align":"left",price:t.movieDetailDatas.price*t.seatSelected.length*100,"button-text":"确认购买"},on:{submit:t.buy}})],1)],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"seats-type"},[s("div",{staticClass:"type-item"},[s("span",{staticClass:"icon"}),s("span",{staticClass:"text"},[t._v("可选")])]),s("div",{staticClass:"type-item center"},[s("span",{staticClass:"icon"}),s("span",{staticClass:"text"},[t._v("不可选")])]),s("div",{staticClass:"type-item"},[s("span",{staticClass:"icon"}),s("span",{staticClass:"text"},[t._v("已选")])])])}],n=(s("a4d3"),s("4de4"),s("4160"),s("0d03"),s("e439"),s("dbb4"),s("b64b"),s("d3b7"),s("25f0"),s("159b"),s("ade3")),r=s("3c1c"),c=s("2f62");function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function l(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){Object(n["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var u=Object(c["a"])("seatsSelectModule"),d=u.mapState,f=(u.mapMutations,{name:"seats-select",data:function(){return{address:"广东广州越秀区沿江西路65号"}},created:function(){var t=this,e=this;this.$toast.loading({duration:0,message:"加载中···"});var s=this.$route.query,a="";if("[object Object]"===Object.prototype.toString.call(s))for(var i in s)a+=s[i];else a=s;this.axios({method:"GET",url:"https://douban.uieee.com/v2/movie/subject/"+a}).then((function(s){e.$toast.clear(),t.$store.commit("seatsSelectModule/movieDetail",s.data)}));var n=JSON.parse(localStorage.getItem("currentUser"));n&&this.$store.commit("seatsSelectModule/username",n)},computed:l({},d(["movieDetailDatas","room","seats","seatSelected","username","loading"])),methods:{back:function(){this.$router.go(-1)},select:function(t){1!=t.type&&this.$store.commit("seatsSelectModule/seatSelected",t)},buy:function(){var t=this;if(this.username)if(0!=this.seatSelected.length){if(!this.loading){this.$store.commit("seatsSelectModule/isLoading",!0);var e={id:this.movieDetailDatas.id,name:this.movieDetailDatas.title,room:this.room,price:"￥"+this.movieDetailDatas.price,totalPrice:this.movieDetailDatas.price*this.seatSelected.length,tickets:this.seatSelected,date:Object(r["a"])(new Date)},s=this,a=JSON.parse(localStorage.getItem("usersMessage")),i=5e3*Math.random(),n=setTimeout((function(){for(var i=0;i<a.length;i++)if(a[i].username==t.username)return a[i].ticketMsg.push(e),localStorage.setItem("usersMessage",JSON.stringify(a)),s.$toast({duration:1500,message:"购票成功"}),t.$store.commit("seatsSelectModule/isLoading",!1),clearTimeout(n),void(n=null);s.$toast({duration:1500,message:"购票失败, 稍后重试"}),t.$store.commit("seatsSelectModule/isLoading",!1),clearTimeout(n),n=null}),i)}}else this.$toast({duration:1500,message:"请先选座"});else this.$toast({duration:1500,message:"请登录后购票"})},getLocation:function(t){this.$router.push({name:"cinema_location",query:t})}}}),m=f,h=(s("eaa4"),s("2877")),v=Object(h["a"])(m,a,i,!1,null,"434ee61b",null);e["default"]=v.exports},"3c1c":function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));s("99af");function a(t){var e={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds()};for(var s in e)e[s]=e[s]<10?"0"+e[s]:e[s];return"".concat(e.year,"-").concat(e.month,"-").concat(e.day," ").concat(e.hour,":").concat(e.minute,":").concat(e.second)}},4160:function(t,e,s){"use strict";var a=s("23e7"),i=s("17c2");a({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"4de4":function(t,e,s){"use strict";var a=s("23e7"),i=s("b727").filter,n=s("d039"),r=s("1dde"),c=r("filter"),o=c&&!n((function(){[].filter.call({length:-1,0:1},(function(t){throw t}))}));a({target:"Array",proto:!0,forced:!c||!o},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},ade3:function(t,e,s){"use strict";function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}s.d(e,"a",(function(){return a}))},b64b:function(t,e,s){var a=s("23e7"),i=s("7b0b"),n=s("df75"),r=s("d039"),c=r((function(){n(1)}));a({target:"Object",stat:!0,forced:c},{keys:function(t){return n(i(t))}})},dbb4:function(t,e,s){var a=s("23e7"),i=s("83ab"),n=s("56ef"),r=s("fc6a"),c=s("06cf"),o=s("8418");a({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,s,a=r(t),i=c.f,l=n(a),u={},d=0;while(l.length>d)s=i(a,e=l[d++]),void 0!==s&&o(u,e,s);return u}})},e439:function(t,e,s){var a=s("23e7"),i=s("d039"),n=s("fc6a"),r=s("06cf").f,c=s("83ab"),o=i((function(){r(1)})),l=!c||o;a({target:"Object",stat:!0,forced:l,sham:!c},{getOwnPropertyDescriptor:function(t,e){return r(n(t),e)}})},eaa4:function(t,e,s){"use strict";var a=s("f18c"),i=s.n(a);i.a},f18c:function(t,e,s){}}]);
//# sourceMappingURL=chunk-13553db5.6bf8feab.js.map